---
layout: post
title: 餐厨打印控制系统设计
category: opinion
description: 餐饮收银系统中餐厨打印为核心之一，需要覆盖到尽可能多的打印场景，故针对本系统设计餐饮打印控制中心。
---

餐饮收银系统中餐厨打印为核心之一，需要覆盖到尽可能多的打印场景，故针对本系统设计餐饮打印控制中心，具体设计如下。

## 一、主流程

根据常规点餐场景梳理出本系统的主流程：![Markdown](http://p1.bpimg.com/586931/c9b3b93fd7475c61.png)

<strong>Pre-Opt</strong>：预操作，下单前浏览菜单选择菜品的过程；

<strong>Operation</strong>：针对订单的操作，下单之后生成相应订单，对此订单执行的相关操作；

<strong>Print Controller</strong>： 打印控制中心，为本餐饮打印系统核心控制单元，主要用于处理打印内容，执行对应的打印方案，给相应的打印方案关联打印模板以及分配打印设备；

<strong>Printer</strong>： 打印设备，也就是联接到系统的打印机。

概括即：可引发打印事件的操作 向 `打印控制中心` 发送法印请求（请求中包含需打印内容+打印类型），`打印控制中心` 处理打印请求向 `打印机` 发出打印指令，`打印机` 打印小票。

## 二、打印控制中心

打印控制中心由三个部分组成：1、打印机管理；2、打印模板设置；3、打印方案设置。

<strong>1、打印机管理</strong>，用来管理打印设备，查看设备状态，修改设备配置等。
重点：设备状态；设备配置。

<strong>2、打印模板设置</strong>，针对不同打印类型不同打印机设置不同的打印模板。
重点：如何便于自定义设置。

<strong>3、打印方案设置</strong>，是本系统的核心，处理打印请求，关联相应的打印设备以及打印模板，向对应的设备发出打印指令。
重点：打印方案与设备和模板的对应关系。

<strong>打印方案说明</strong>
1、控制中心处理打印请求，给操作分配打印方案；
![Markdown](http://p1.bpimg.com/586931/4e2ddddd10da58d5.png)
>注意：一个操作可对应多个打印方案（1：n），打印方案是根据下单菜品的类型来分配的。

2、打印方案关联对应的设备及模板。
![Markdown](http://p1.bpimg.com/586931/c18f528504181086.png)
> 注意：一个打印方案关联一个打印模板（1：1），一个打印方案关联一个打印设备（1：1），也就是说打印设备并不直接关联打印模板，而是通过打印方案关联。

<strong>彩色文字设置打印方案时，需添加打印类别，即“下单”、“加单”、“退单”等。</strong>

## 三、模型说明

以下通过模型说明打印控制中心工作方式：
![Markdown](http://p1.bpimg.com/586931/dbc0c4d2fb063c95.png)

引入实例说明：
![Markdown](http://p1.bpimg.com/586931/81b890c72b79208d.png)

## 四、其他说明

#### 1、厨房打印中，是否需要拆单打印，默认是需要的；

#### 2、系统初始化时，初始化状态问题：

<ul>
	<li>默认使用自带通用打印模板（常见模板系统应自带）；</li>
	<li>默认使用通用打印方案（自带一个通用打印方案，一般按收银台打印方案设计）；</li>
	<li>连接第一台打印设备时，默认将此设备设为通用型设备（或者收银台打印机）；</li>
	<li>如果连接了多台设备，但均未分配打印方案，则按上一条执行；</li>
</ul>

#### 3、打印设备的状态：
<ul>
	<li>未分配</li>
	<li>已分配</li>
	<li>脱机</li>
	<li>故障</li>
</ul>

## 五、总结

根据目前此设计草案，基本可以实现常见餐饮打印场景需求。